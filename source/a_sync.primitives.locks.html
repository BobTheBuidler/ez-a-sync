

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>a_sync.primitives.locks package &mdash; ez-a-sync  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="a_sync.sphinx package" href="a_sync.sphinx.html" />
    <link rel="prev" title="a_sync.primitives package" href="a_sync.primitives.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ez-a-sync
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">a_sync</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="a_sync.html">a_sync package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="a_sync.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="a_sync.a_sync.html">a_sync.a_sync package</a></li>
<li class="toctree-l4"><a class="reference internal" href="a_sync.async_property.html">a_sync.async_property package</a></li>
<li class="toctree-l4"><a class="reference internal" href="a_sync.asyncio.html">a_sync.asyncio package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="a_sync.primitives.html">a_sync.primitives package</a></li>
<li class="toctree-l4"><a class="reference internal" href="a_sync.sphinx.html">a_sync.sphinx package</a></li>
<li class="toctree-l4"><a class="reference internal" href="a_sync.utils.html">a_sync.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.ENVIRONMENT_VARIABLES">a_sync.ENVIRONMENT_VARIABLES module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync._smart">a_sync._smart module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync._typing">a_sync._typing module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.aliases">a_sync.aliases module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.debugging">a_sync.debugging module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.exceptions">a_sync.exceptions module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.executor">a_sync.executor module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.functools">a_sync.functools module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.future">a_sync.future module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.iter">a_sync.iter module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync.task">a_sync.task module</a></li>
<li class="toctree-l3"><a class="reference internal" href="a_sync.html#module-a_sync">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ez-a-sync</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">a_sync</a></li>
          <li class="breadcrumb-item"><a href="a_sync.html">a_sync package</a></li>
          <li class="breadcrumb-item"><a href="a_sync.primitives.html">a_sync.primitives package</a></li>
      <li class="breadcrumb-item active">a_sync.primitives.locks package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/source/a_sync.primitives.locks.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="a-sync-primitives-locks-package">
<h1>a_sync.primitives.locks package<a class="headerlink" href="#a-sync-primitives-locks-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-a_sync.primitives.locks.counter">
<span id="a-sync-primitives-locks-counter-module"></span><h2>a_sync.primitives.locks.counter module<a class="headerlink" href="#module-a_sync.primitives.locks.counter" title="Link to this heading"></a></h2>
<p>This module provides two specialized async flow management classes, <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> and <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLockCluster" title="a_sync.primitives.locks.counter.CounterLockCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLockCluster</span></code></a>.</p>
<p>These primitives manage synchronization of tasks that must wait for an internal counter to reach a specific value.</p>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.counter.</span></span><span class="sig-name descname"><span class="pre">CounterLock</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="a_sync.primitives.html#a_sync.primitives._debug._DebugDaemonMixin" title="a_sync.primitives._debug._DebugDaemonMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code></a></p>
<p>CounterLock(int start_value: int = 0, str name=’’)</p>
<p>An async primitive that uses an internal counter to manage task synchronization.</p>
<p>A coroutine can <cite>await counter.wait_for(3)</cite> and it will wait until the internal counter &gt;= 3.
If some other task executes <cite>counter.value = 5</cite> or <cite>counter.set(5)</cite>, the first coroutine will proceed as 5 &gt;= 3.</p>
<p>The internal counter can only be set to a value greater than the current value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLockCluster" title="a_sync.primitives.locks.counter.CounterLockCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLockCluster</span></code></a> for managing multiple <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> instances.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> with a starting value and an optional name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_value</strong> – The initial value of the counter.</p></li>
<li><p><strong>name</strong> – An optional name for the counter, used in debug logs.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_counter&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">value</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Periodically logs debug information about the counter state and waiters.</p>
<p>This method is used internally to provide debugging information when debug logging is enabled.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock._start_debug_daemon" title="a_sync.primitives.locks.counter.CounterLock._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock._ensure_debug_daemon" title="a_sync.primitives.locks.counter.CounterLock._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock._ensure_debug_daemon" title="a_sync.primitives.locks.counter.CounterLock._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock.is_ready">
<span class="sig-name descname"><span class="pre">is_ready</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">v</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock.is_ready" title="Link to this definition"></a></dt>
<dd><p>A function that indicates whether the current counter value is greater than or equal to a given value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">value</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock.set" title="Link to this definition"></a></dt>
<dd><p>Sets the counter to the specified value.</p>
<p>This method internally uses the <cite>value</cite> property to enforce that the new value must be strictly greater than the current value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – The value to set the counter to. Must be strictly greater than the current value.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If the new value is less than or equal to the current value.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">value</span>
<span class="go">5</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock.value" title="a_sync.primitives.locks.counter.CounterLock.value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CounterLock.value()</span></code></a> for direct value assignment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock.wait_for">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wait_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">value</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bint</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock.wait_for" title="Link to this definition"></a></dt>
<dd><p>Waits until the counter reaches or exceeds the specified value.</p>
<p>This method will ensure the debug daemon is running if the counter is not ready.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – The value to wait for.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bint</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">counter</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># This will block until counter.value &gt;= 5</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock.set" title="a_sync.primitives.locks.counter.CounterLock.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CounterLock.set()</span></code></a> to set the counter value.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock._name">
<span class="sig-name descname"><span class="pre">_name</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock._name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>CounterLock._name</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLock.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLock.value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<p>Gets the current value of the counter.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">value</span>
<span class="go">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>CounterLock.value</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLockCluster">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.counter.</span></span><span class="sig-name descname"><span class="pre">CounterLockCluster</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLockCluster" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>An asyncio primitive that represents a collection of <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> objects.</p>
<p><cite>wait_for(i)</cite> will wait until the value of all <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> objects is &gt;= i.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> for managing individual counters.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLockCluster.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter_locks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><span class="pre">CounterLock</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLockCluster.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLockCluster" title="a_sync.primitives.locks.counter.CounterLockCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLockCluster</span></code></a> with a collection of <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>counter_locks</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.14)"><em>Iterable</em></a><em>[</em><a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><em>CounterLock</em></a><em>]</em>) – The <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> objects to manage.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lock1</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lock2</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span> <span class="o">=</span> <span class="n">CounterLockCluster</span><span class="p">([</span><span class="n">lock1</span><span class="p">,</span> <span class="n">lock2</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLockCluster.wait_for">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wait_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">int</span> <span class="pre">value:</span> <span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bint</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLockCluster.wait_for" title="Link to this definition"></a></dt>
<dd><p>Waits until the value of all <a class="reference internal" href="#a_sync.primitives.locks.counter.CounterLock" title="a_sync.primitives.locks.counter.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> objects in the cluster reaches or exceeds the specified value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – The value to wait for.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bint</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lock1</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lock2</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cluster</span> <span class="o">=</span> <span class="n">CounterLockCluster</span><span class="p">([</span><span class="n">lock1</span><span class="p">,</span> <span class="n">lock2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">cluster</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># This will block until all locks have value &gt;= 5</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.counter.CounterLockCluster.locks">
<span class="sig-name descname"><span class="pre">locks</span></span><a class="headerlink" href="#a_sync.primitives.locks.counter.CounterLockCluster.locks" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-a_sync.primitives.locks.event">
<span id="a-sync-primitives-locks-event-module"></span><h2>a_sync.primitives.locks.event module<a class="headerlink" href="#module-a_sync.primitives.locks.event" title="Link to this heading"></a></h2>
<p>This module provides an enhanced version of asyncio.Event with additional debug logging to help detect deadlocks.</p>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.event.</span></span><span class="sig-name descname"><span class="pre">CythonEvent</span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="a_sync.primitives.html#a_sync.primitives._debug._DebugDaemonMixin" title="a_sync.primitives._debug._DebugDaemonMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code></a></p>
<p>CythonEvent(str name: str = ‘’, int debug_daemon_interval: int = 300, loop: Optional[AbstractEventLoop] = None, <a href="#id1"><span class="problematic" id="id2">*</span></a>)</p>
<p>An asyncio.Event with additional debug logging to help detect deadlocks.</p>
<p>This event class extends asyncio.Event by adding debug logging capabilities. It logs
detailed information about the event state and waiters, which can be useful for
diagnosing and debugging potential deadlocks.</p>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the Event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><em>str</em></a>) – An optional name for the event, used in debug logs.</p></li>
<li><p><strong>debug_daemon_interval</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><em>int</em></a>) – The interval in seconds for the debug daemon to log information.</p></li>
<li><p><strong>loop</strong> (<em>Optional</em><em>[</em><em>AbstractEventLoop</em><em>]</em>) – The event loop to use.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Periodically logs debug information about the event state and waiters.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.event.CythonEvent._start_debug_daemon" title="a_sync.primitives.locks.event.CythonEvent._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.event.CythonEvent._ensure_debug_daemon" title="a_sync.primitives.locks.event.CythonEvent._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.event.CythonEvent._ensure_debug_daemon" title="a_sync.primitives.locks.event.CythonEvent._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent.clear" title="Link to this definition"></a></dt>
<dd><p>Reset the internal flag to false. Subsequently, coroutines calling
wait() will block until set() is called to set the internal flag
to true again.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent.is_set">
<span class="sig-name descname"><span class="pre">is_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent.is_set" title="Link to this definition"></a></dt>
<dd><p>Return True if and only if the internal flag is true.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent.set" title="Link to this definition"></a></dt>
<dd><p>Set the internal flag to true. All coroutines waiting for it to
become true are awakened. Coroutine that call wait() once the flag is
true will not block at all.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent.wait">
<span class="sig-name descname"><span class="pre">wait</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent.wait" title="Link to this definition"></a></dt>
<dd><p>Block until the internal flag is true.</p>
<p>If the internal flag is true on entry, return True
immediately.  Otherwise, block until another coroutine calls
set() to set the flag to true, then return True.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True when the event is set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent._name">
<span class="sig-name descname"><span class="pre">_name</span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent._name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>CythonEvent._name</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event.CythonEvent.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.event.CythonEvent.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.primitives.locks.event._return_true">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.event.</span></span><span class="sig-name descname"><span class="pre">_return_true</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.event._return_true" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-a_sync.primitives.locks.prio_semaphore">
<span id="a-sync-primitives-locks-prio-semaphore-module"></span><h2>a_sync.primitives.locks.prio_semaphore module<a class="headerlink" href="#module-a_sync.primitives.locks.prio_semaphore" title="Link to this heading"></a></h2>
<p>This module provides priority-based semaphore implementations. These semaphores allow
waiters to be assigned priorities, ensuring that higher priority waiters are
processed before lower priority ones.</p>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.Priority">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.prio_semaphore.</span></span><span class="sig-name descname"><span class="pre">Priority</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.Priority" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Protocol" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Protocol</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.Priority.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.Priority.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.prio_semaphore.</span></span><span class="sig-name descname"><span class="pre">PrioritySemaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">_AbstractPrioritySemaphore</span></code></a></p>
<p>PrioritySemaphore(int value: int = 1, str name: Optional[str] = None, <a href="#id3"><span class="problematic" id="id4">*</span></a>) -&gt; None</p>
<p>Semaphore that uses numeric priorities for waiters.</p>
<p>This class extends <a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">_AbstractPrioritySemaphore</span></code></a> and provides a concrete implementation
using numeric priorities. The <cite>_context_manager_class</cite> is set to <a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager" title="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">_PrioritySemaphoreContextManager</span></code></a>,
and the <cite>_top_priority</cite> is set to -1, which is the highest priority.</p>
<p class="rubric">Examples</p>
<p>The primary way to use this semaphore is by specifying a priority.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">priority_semaphore</span> <span class="o">=</span> <span class="n">PrioritySemaphore</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">with</span> <span class="n">priority_semaphore</span><span class="p">[</span><span class="n">priority</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">do_stuff</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also enter and exit this semaphore without specifying a priority, and it will use the top priority by default:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">priority_semaphore</span> <span class="o">=</span> <span class="n">PrioritySemaphore</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">with</span> <span class="n">priority_semaphore</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">do_stuff</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">_AbstractPrioritySemaphore</span></code></a> for the base class implementation.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PT</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'_PrioritySemaphoreContextManager[PT]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.__getitem__" title="Link to this definition"></a></dt>
<dd><p>Gets the context manager for a given priority.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>priority</strong> – The priority for which to get the context manager. If None, uses the top priority.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The context manager associated with the given priority.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">semaphore</span><span class="p">[</span><span class="n">priority</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._start_debug_daemon" title="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wakes up the next waiter in line.</p>
<p>This method handles the waking of waiters based on priority. It includes an emergency
procedure to handle potential lost waiters, ensuring that no waiter is left indefinitely
waiting.</p>
<p>The emergency procedure is a temporary measure to address potential issues with lost waiters.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span><span class="o">.</span><span class="n">_wake_up_next</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquires the semaphore with the top priority.</p>
<p>This method overrides <code class="xref py py-meth docutils literal notranslate"><span class="pre">Semaphore.acquire()</span></code> to handle priority-based logic.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">semaphore</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Checks if the semaphore is locked.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the semaphore cannot be acquired immediately, False otherwise.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span><span class="o">.</span><span class="n">locked</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.release" title="Link to this definition"></a></dt>
<dd><p>Release a semaphore, incrementing the internal counter by one.</p>
<p>When it was zero on entry and another coroutine is waiting for it to
become larger than zero again, wake up that coroutine.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._capacity">
<span class="sig-name descname"><span class="pre">_capacity</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._capacity" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._context_manager_class">
<span class="sig-name descname"><span class="pre">_context_manager_class</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._context_manager_class" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._context_managers">
<span class="sig-name descname"><span class="pre">_context_managers</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._context_managers" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._potential_lost_waiters">
<span class="sig-name descname"><span class="pre">_potential_lost_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._potential_lost_waiters" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._top_priority">
<span class="sig-name descname"><span class="pre">_top_priority</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._top_priority" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._top_priority_manager">
<span class="sig-name descname"><span class="pre">_top_priority_manager</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._top_priority_manager" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.prio_semaphore.</span></span><span class="sig-name descname"><span class="pre">_AbstractPrioritySemaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore" title="a_sync.primitives.locks.semaphore.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a></p>
<p>_AbstractPrioritySemaphore(context_manager_class: Type[_AbstractPrioritySemaphoreContextManager], top_priority: object, int value: int = 1, str name: Optional[str] = None, <a href="#id5"><span class="problematic" id="id6">*</span></a>) -&gt; None</p>
<p>A semaphore that allows prioritization of waiters.</p>
<p>This semaphore manages waiters with associated priorities, ensuring that waiters with higher
priorities are processed before those with lower priorities. Subclasses must define the
<cite>_top_priority</cite> attribute to specify the default top priority behavior.</p>
<p>The <cite>_context_manager_class</cite> attribute should specify the class used for managing semaphore contexts.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore.PrioritySemaphore" title="a_sync.primitives.locks.prio_semaphore.PrioritySemaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrioritySemaphore</span></code></a> for an implementation using numeric priorities.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PT</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'_AbstractPrioritySemaphoreContextManager[PT]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.__getitem__" title="Link to this definition"></a></dt>
<dd><p>Gets the context manager for a given priority.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>priority</strong> – The priority for which to get the context manager. If None, uses the top priority.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The context manager associated with the given priority.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">semaphore</span><span class="p">[</span><span class="n">priority</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the priority semaphore.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The initial capacity of the semaphore.</p></li>
<li><p><strong>name</strong> – An optional name for the semaphore, used for debugging.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_semaphore&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._start_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wakes up the next waiter in line.</p>
<p>This method handles the waking of waiters based on priority. It includes an emergency
procedure to handle potential lost waiters, ensuring that no waiter is left indefinitely
waiting.</p>
<p>The emergency procedure is a temporary measure to address potential issues with lost waiters.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span><span class="o">.</span><span class="n">_wake_up_next</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquires the semaphore with the top priority.</p>
<p>This method overrides <code class="xref py py-meth docutils literal notranslate"><span class="pre">Semaphore.acquire()</span></code> to handle priority-based logic.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">semaphore</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Checks if the semaphore is locked.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the semaphore cannot be acquired immediately, False otherwise.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span><span class="o">.</span><span class="n">locked</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.release" title="Link to this definition"></a></dt>
<dd><p>Release a semaphore, incrementing the internal counter by one.</p>
<p>When it was zero on entry and another coroutine is waiting for it to
become larger than zero again, wake up that coroutine.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._capacity">
<span class="sig-name descname"><span class="pre">_capacity</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._capacity" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._context_manager_class">
<span class="sig-name descname"><span class="pre">_context_manager_class</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._context_manager_class" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._context_managers">
<span class="sig-name descname"><span class="pre">_context_managers</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._context_managers" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._potential_lost_waiters">
<span class="sig-name descname"><span class="pre">_potential_lost_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._potential_lost_waiters" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._top_priority">
<span class="sig-name descname"><span class="pre">_top_priority</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._top_priority" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._top_priority_manager">
<span class="sig-name descname"><span class="pre">_top_priority_manager</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._top_priority_manager" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.prio_semaphore.</span></span><span class="sig-name descname"><span class="pre">_AbstractPrioritySemaphoreContextManager</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore" title="a_sync.primitives.locks.semaphore.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a></p>
<p>_AbstractPrioritySemaphoreContextManager(_AbstractPrioritySemaphore parent: _AbstractPrioritySemaphore, priority: PT, str name: Optional[str] = None) -&gt; None</p>
<p>A context manager for priority semaphore waiters.</p>
<p>This context manager is associated with a specific priority and handles
the acquisition and release of the semaphore for waiters with that priority.</p>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._AbstractPrioritySemaphoreContextManager__acquire">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_AbstractPrioritySemaphoreContextManager__acquire</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._AbstractPrioritySemaphoreContextManager__acquire" title="Link to this definition"></a></dt>
<dd><p>_AbstractPrioritySemaphoreContextManager.__acquire(self) -&gt; Literal[True]</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><em>Literal</em></a>[True]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the context manager for a specific priority.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> – The parent semaphore.</p></li>
<li><p><strong>priority</strong> – The priority associated with this context manager.</p></li>
<li><p><strong>name</strong> – An optional name for the context manager, used for debugging.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parent_semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphoreContextManager</span><span class="p">(</span><span class="n">parent_semaphore</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._start_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._repr_no_parent_">
<span class="sig-name descname"><span class="pre">_repr_no_parent_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._repr_no_parent_" title="Link to this definition"></a></dt>
<dd><p>Returns a string representation of the context manager without the parent.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquires the semaphore for this context manager.</p>
<p>If the internal counter is larger than zero on entry,
decrement it by one and return True immediately. If it is
zero on entry, block, waiting until some other coroutine has
called release() to make it larger than 0, and then return
True.</p>
<p>This method overrides <code class="xref py py-meth docutils literal notranslate"><span class="pre">Semaphore.acquire()</span></code> to handle priority-based logic.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphoreContextManager</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">context_manager</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.release" title="Link to this definition"></a></dt>
<dd><p>Releases the semaphore for this context manager.</p>
<p>This method overrides <code class="xref py py-meth docutils literal notranslate"><span class="pre">Semaphore.release()</span></code> to handle priority-based logic.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphoreContextManager</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._parent">
<span class="sig-name descname"><span class="pre">_parent</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._parent" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._priority">
<span class="sig-name descname"><span class="pre">_priority</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._priority" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._priority_name">
<span class="sig-name descname"><span class="pre">_priority_name</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._priority_name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.prio_semaphore.</span></span><span class="sig-name descname"><span class="pre">_PrioritySemaphoreContextManager</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphoreContextManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">_AbstractPrioritySemaphoreContextManager</span></code></a></p>
<p>Context manager for numeric priority semaphores.</p>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._AbstractPrioritySemaphoreContextManager__acquire">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_AbstractPrioritySemaphoreContextManager__acquire</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._AbstractPrioritySemaphoreContextManager__acquire" title="Link to this definition"></a></dt>
<dd><p>_AbstractPrioritySemaphoreContextManager.__acquire(self) -&gt; Literal[True]</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><em>Literal</em></a>[True]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the context manager for a specific priority.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> – The parent semaphore.</p></li>
<li><p><strong>priority</strong> – The priority associated with this context manager.</p></li>
<li><p><strong>name</strong> – An optional name for the context manager, used for debugging.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parent_semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphoreContextManager</span><span class="p">(</span><span class="n">parent_semaphore</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._start_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._repr_no_parent_">
<span class="sig-name descname"><span class="pre">_repr_no_parent_</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._repr_no_parent_" title="Link to this definition"></a></dt>
<dd><p>Returns a string representation of the context manager without the parent.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._ensure_debug_daemon" title="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquires the semaphore for this context manager.</p>
<p>If the internal counter is larger than zero on entry,
decrement it by one and return True immediately. If it is
zero on entry, block, waiting until some other coroutine has
called release() to make it larger than 0, and then return
True.</p>
<p>This method overrides <code class="xref py py-meth docutils literal notranslate"><span class="pre">Semaphore.acquire()</span></code> to handle priority-based logic.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphoreContextManager</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">context_manager</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.release" title="Link to this definition"></a></dt>
<dd><p>Releases the semaphore for this context manager.</p>
<p>This method overrides <code class="xref py py-meth docutils literal notranslate"><span class="pre">Semaphore.release()</span></code> to handle priority-based logic.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphoreContextManager</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._parent">
<span class="sig-name descname"><span class="pre">_parent</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._parent" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._priority">
<span class="sig-name descname"><span class="pre">_priority</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._priority" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._priority_name">
<span class="sig-name descname"><span class="pre">_priority_name</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._priority_name" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.prio_semaphore._PrioritySemaphoreContextManager.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-a_sync.primitives.locks.semaphore">
<span id="a-sync-primitives-locks-semaphore-module"></span><h2>a_sync.primitives.locks.semaphore module<a class="headerlink" href="#module-a_sync.primitives.locks.semaphore" title="Link to this heading"></a></h2>
<p>This module provides various semaphore implementations, including a debug-enabled semaphore,
a dummy semaphore that does nothing, and a threadsafe semaphore for use in multi-threaded applications.</p>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.semaphore.</span></span><span class="sig-name descname"><span class="pre">DummySemaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore" title="a_sync.primitives.locks.semaphore.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a></p>
<p>DummySemaphore(str name: Optional[str] = None)</p>
<p>A dummy semaphore that implements the standard <a class="reference external" href="https://docs.python.org/3/library/asyncio-sync.html#asyncio.Semaphore" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Semaphore</span></code></a> API but does nothing.</p>
<p>This class is useful for scenarios where a semaphore interface is required but no actual synchronization is needed.</p>
<p class="rubric">Example</p>
<p>dummy_semaphore = DummySemaphore()</p>
<dl class="simple">
<dt>async def no_op():</dt><dd><dl class="simple">
<dt>async with dummy_semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the dummy semaphore with an optional name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>optional</em>) – An optional name for the dummy semaphore.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.DummySemaphore._start_debug_daemon" title="a_sync.primitives.locks.semaphore.DummySemaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.DummySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.semaphore.DummySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.DummySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.semaphore.DummySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.acquire">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquire the dummy semaphore, which is a no-op.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><em>Literal</em></a>[True]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.release" title="Link to this definition"></a></dt>
<dd><p>No-op release method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.DummySemaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.DummySemaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.semaphore.</span></span><span class="sig-name descname"><span class="pre">Semaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="a_sync.primitives.html#a_sync.primitives._debug._DebugDaemonMixin" title="a_sync.primitives._debug._DebugDaemonMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code></a></p>
<p>Semaphore(int value: int = 1, str name=’’, loop=None) -&gt; None</p>
<p>A semaphore with additional debugging capabilities inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code>.</p>
<p>This semaphore includes debug logging capabilities that are activated when the semaphore has waiters.
It allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>You can write this pattern:</p>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a>`
semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def limited():</dt><dd><dl class="simple">
<dt>async with semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a></p>
<p>like this:</p>
<p><a href="#id13"><span class="problematic" id="id14">``</span></a>`
semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> for more details on debugging capabilities.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the semaphore with a given value and optional name for debugging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The initial value for the semaphore.</p></li>
<li><p><strong>name</strong> (<em>optional</em>) – An optional name used only to provide useful context in debug logs.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore._start_debug_daemon" title="a_sync.primitives.locks.semaphore.Semaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore._ensure_debug_daemon" title="a_sync.primitives.locks.semaphore.Semaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore._ensure_debug_daemon" title="a_sync.primitives.locks.semaphore.Semaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquire the semaphore, ensuring that debug logging is enabled if there are waiters.</p>
<p>If the internal counter is larger than zero on entry, decrement it by one and return
True immediately.  If it is zero on entry, block, waiting until some other coroutine
has called release() to make it larger than 0, and then return True.</p>
<p>If the semaphore value is zero or less, the debug daemon is started to log the state of the semaphore.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True when the semaphore is successfully acquired.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.release" title="Link to this definition"></a></dt>
<dd><p>Release a semaphore, incrementing the internal counter by one.</p>
<p>When it was zero on entry and another coroutine is waiting for it to
become larger than zero again, wake up that coroutine.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.Semaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.Semaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.semaphore.</span></span><span class="sig-name descname"><span class="pre">ThreadsafeSemaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore" title="a_sync.primitives.locks.semaphore.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a></p>
<p>ThreadsafeSemaphore(int value: Optional[int], str name: Optional[str] = None) -&gt; None</p>
<p>A semaphore that works in a multi-threaded environment.</p>
<p>This semaphore ensures that the program functions correctly even when used with multiple event loops.
It provides a workaround for edge cases involving multiple threads and event loops by using a separate semaphore
for each thread.</p>
<p class="rubric">Example</p>
<p>semaphore = ThreadsafeSemaphore(5)</p>
<dl class="simple">
<dt>async def limited():</dt><dd><dl class="simple">
<dt>async with semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore" title="a_sync.primitives.locks.semaphore.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a> for the base class implementation.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the threadsafe semaphore with a given value and optional name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The initial value for the semaphore, should be an integer.</p></li>
<li><p><strong>name</strong> (<em>optional</em>) – An optional name for the semaphore.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._start_debug_daemon" title="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquire the semaphore, ensuring that debug logging is enabled if there are waiters.</p>
<p>If the internal counter is larger than zero on entry, decrement it by one and return
True immediately.  If it is zero on entry, block, waiting until some other coroutine
has called release() to make it larger than 0, and then return True.</p>
<p>If the semaphore value is zero or less, the debug daemon is started to log the state of the semaphore.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True when the semaphore is successfully acquired.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.release" title="Link to this definition"></a></dt>
<dd><p>Release a semaphore, incrementing the internal counter by one.</p>
<p>When it was zero on entry and another coroutine is waiting for it to
become larger than zero again, wake up that coroutine.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.semaphore">
<span class="sig-name descname"><span class="pre">semaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore.ThreadsafeSemaphore.semaphore" title="Link to this definition"></a></dt>
<dd><p>Semaphore</p>
<p>Returns the appropriate semaphore for the current thread.</p>
<p>NOTE: We can’t cache this property because we need to check the current thread every time we access it.</p>
<p class="rubric">Example</p>
<p>semaphore = ThreadsafeSemaphore(5)</p>
<dl class="simple">
<dt>async def limited():</dt><dd><dl class="simple">
<dt>async with semaphore.semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ThreadsafeSemaphore.semaphore</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="a_sync.primitives.locks.semaphore._noop">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.semaphore.</span></span><span class="sig-name descname"><span class="pre">_noop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.semaphore._noop" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><em>Literal</em></a>[True]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-a_sync.primitives.locks">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-a_sync.primitives.locks" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.</span></span><span class="sig-name descname"><span class="pre">CounterLock</span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="a_sync.primitives.html#a_sync.primitives._debug._DebugDaemonMixin" title="a_sync.primitives._debug._DebugDaemonMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code></a></p>
<p>CounterLock(int start_value: int = 0, str name=’’)</p>
<p>An async primitive that uses an internal counter to manage task synchronization.</p>
<p>A coroutine can <cite>await counter.wait_for(3)</cite> and it will wait until the internal counter &gt;= 3.
If some other task executes <cite>counter.value = 5</cite> or <cite>counter.set(5)</cite>, the first coroutine will proceed as 5 &gt;= 3.</p>
<p>The internal counter can only be set to a value greater than the current value.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLockCluster</span></code> for managing multiple <a class="reference internal" href="#a_sync.primitives.locks.CounterLock" title="a_sync.primitives.locks.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> instances.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock.__init__" title="Link to this definition"></a></dt>
<dd><p>Initializes the <a class="reference internal" href="#a_sync.primitives.locks.CounterLock" title="a_sync.primitives.locks.CounterLock"><code class="xref py py-class docutils literal notranslate"><span class="pre">CounterLock</span></code></a> with a starting value and an optional name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start_value</strong> – The initial value of the counter.</p></li>
<li><p><strong>name</strong> – An optional name for the counter, used in debug logs.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;example_counter&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">value</span>
<span class="go">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Periodically logs debug information about the counter state and waiters.</p>
<p>This method is used internally to provide debugging information when debug logging is enabled.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.CounterLock._start_debug_daemon" title="a_sync.primitives.locks.CounterLock._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.CounterLock._ensure_debug_daemon" title="a_sync.primitives.locks.CounterLock._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.CounterLock._ensure_debug_daemon" title="a_sync.primitives.locks.CounterLock._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock.is_ready">
<span class="sig-name descname"><span class="pre">is_ready</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">v</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock.is_ready" title="Link to this definition"></a></dt>
<dd><p>A function that indicates whether the current counter value is greater than or equal to a given value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock.set">
<span class="sig-name descname"><span class="pre">set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">value</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock.set" title="Link to this definition"></a></dt>
<dd><p>Sets the counter to the specified value.</p>
<p>This method internally uses the <cite>value</cite> property to enforce that the new value must be strictly greater than the current value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – The value to set the counter to. Must be strictly greater than the current value.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If the new value is less than or equal to the current value.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">value</span>
<span class="go">5</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.CounterLock.value" title="a_sync.primitives.locks.CounterLock.value"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CounterLock.value()</span></code></a> for direct value assignment.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock.wait_for">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">wait_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">long</span> <span class="pre">long</span> <span class="pre">value</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bint</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock.wait_for" title="Link to this definition"></a></dt>
<dd><p>Waits until the counter reaches or exceeds the specified value.</p>
<p>This method will ensure the debug daemon is running if the counter is not ready.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> – The value to wait for.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bint</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">counter</span><span class="o">.</span><span class="n">wait_for</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c1"># This will block until counter.value &gt;= 5</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.CounterLock.set" title="a_sync.primitives.locks.CounterLock.set"><code class="xref py py-meth docutils literal notranslate"><span class="pre">CounterLock.set()</span></code></a> to set the counter value.</p>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock._name">
<span class="sig-name descname"><span class="pre">_name</span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock._name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>CounterLock._name</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.CounterLock.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#a_sync.primitives.locks.CounterLock.value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<p>Gets the current value of the counter.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span> <span class="o">=</span> <span class="n">CounterLock</span><span class="p">(</span><span class="n">start_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">counter</span><span class="o">.</span><span class="n">value</span>
<span class="go">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>CounterLock.value</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.</span></span><span class="sig-name descname"><span class="pre">DummySemaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore" title="a_sync.primitives.locks.semaphore.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a></p>
<p>DummySemaphore(str name: Optional[str] = None)</p>
<p>A dummy semaphore that implements the standard <a class="reference external" href="https://docs.python.org/3/library/asyncio-sync.html#asyncio.Semaphore" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Semaphore</span></code></a> API but does nothing.</p>
<p>This class is useful for scenarios where a semaphore interface is required but no actual synchronization is needed.</p>
<p class="rubric">Example</p>
<p>dummy_semaphore = DummySemaphore()</p>
<dl class="simple">
<dt>async def no_op():</dt><dd><dl class="simple">
<dt>async with dummy_semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the dummy semaphore with an optional name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<em>optional</em>) – An optional name for the dummy semaphore.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.DummySemaphore._start_debug_daemon" title="a_sync.primitives.locks.DummySemaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.DummySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.DummySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.DummySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.DummySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.acquire">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquire the dummy semaphore, which is a no-op.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Literal" title="(in Python v3.14)"><em>Literal</em></a>[True]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.release" title="Link to this definition"></a></dt>
<dd><p>No-op release method.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.DummySemaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.DummySemaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Event">
<span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.</span></span><span class="sig-name descname"><span class="pre">Event</span></span><a class="headerlink" href="#a_sync.primitives.locks.Event" title="Link to this definition"></a></dt>
<dd><p>alias of <a class="reference internal" href="#a_sync.primitives.locks.event.CythonEvent" title="a_sync.primitives.locks.event.CythonEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">CythonEvent</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.</span></span><span class="sig-name descname"><span class="pre">PrioritySemaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore" title="a_sync.primitives.locks.prio_semaphore._AbstractPrioritySemaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">_AbstractPrioritySemaphore</span></code></a></p>
<p>PrioritySemaphore(int value: int = 1, str name: Optional[str] = None, <a href="#id19"><span class="problematic" id="id20">*</span></a>) -&gt; None</p>
<p>Semaphore that uses numeric priorities for waiters.</p>
<p>This class extends <code class="xref py py-class docutils literal notranslate"><span class="pre">_AbstractPrioritySemaphore</span></code> and provides a concrete implementation
using numeric priorities. The <cite>_context_manager_class</cite> is set to <code class="xref py py-class docutils literal notranslate"><span class="pre">_PrioritySemaphoreContextManager</span></code>,
and the <cite>_top_priority</cite> is set to -1, which is the highest priority.</p>
<p class="rubric">Examples</p>
<p>The primary way to use this semaphore is by specifying a priority.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">priority_semaphore</span> <span class="o">=</span> <span class="n">PrioritySemaphore</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">with</span> <span class="n">priority_semaphore</span><span class="p">[</span><span class="n">priority</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">do_stuff</span><span class="p">()</span>
</pre></div>
</div>
<p>You can also enter and exit this semaphore without specifying a priority, and it will use the top priority by default:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">priority_semaphore</span> <span class="o">=</span> <span class="n">PrioritySemaphore</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">with</span> <span class="n">priority_semaphore</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">do_stuff</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">_AbstractPrioritySemaphore</span></code> for the base class implementation.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">PT</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'_PrioritySemaphoreContextManager[PT]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.__getitem__" title="Link to this definition"></a></dt>
<dd><p>Gets the context manager for a given priority.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>priority</strong> – The priority for which to get the context manager. If None, uses the top priority.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The context manager associated with the given priority.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">context_manager</span> <span class="o">=</span> <span class="n">semaphore</span><span class="p">[</span><span class="n">priority</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.__init__" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.PrioritySemaphore._start_debug_daemon" title="a_sync.primitives.locks.PrioritySemaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.PrioritySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.PrioritySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.PrioritySemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.PrioritySemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wakes up the next waiter in line.</p>
<p>This method handles the waking of waiters based on priority. It includes an emergency
procedure to handle potential lost waiters, ensuring that no waiter is left indefinitely
waiting.</p>
<p>The emergency procedure is a temporary measure to address potential issues with lost waiters.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span><span class="o">.</span><span class="n">_wake_up_next</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquires the semaphore with the top priority.</p>
<p>This method overrides <a class="reference internal" href="#a_sync.primitives.locks.Semaphore.acquire" title="a_sync.primitives.locks.Semaphore.acquire"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Semaphore.acquire()</span></code></a> to handle priority-based logic.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">semaphore</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Checks if the semaphore is locked.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the semaphore cannot be acquired immediately, False otherwise.</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span> <span class="o">=</span> <span class="n">_AbstractPrioritySemaphore</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">semaphore</span><span class="o">.</span><span class="n">locked</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.release" title="Link to this definition"></a></dt>
<dd><p>Release a semaphore, incrementing the internal counter by one.</p>
<p>When it was zero on entry and another coroutine is waiting for it to
become larger than zero again, wake up that coroutine.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._capacity">
<span class="sig-name descname"><span class="pre">_capacity</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._capacity" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._context_manager_class">
<span class="sig-name descname"><span class="pre">_context_manager_class</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._context_manager_class" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._context_managers">
<span class="sig-name descname"><span class="pre">_context_managers</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._context_managers" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._potential_lost_waiters">
<span class="sig-name descname"><span class="pre">_potential_lost_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._potential_lost_waiters" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._top_priority">
<span class="sig-name descname"><span class="pre">_top_priority</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._top_priority" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._top_priority_manager">
<span class="sig-name descname"><span class="pre">_top_priority_manager</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._top_priority_manager" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.PrioritySemaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.PrioritySemaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.</span></span><span class="sig-name descname"><span class="pre">Semaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="a_sync.primitives.html#a_sync.primitives._debug._DebugDaemonMixin" title="a_sync.primitives._debug._DebugDaemonMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code></a></p>
<p>Semaphore(int value: int = 1, str name=’’, loop=None) -&gt; None</p>
<p>A semaphore with additional debugging capabilities inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code>.</p>
<p>This semaphore includes debug logging capabilities that are activated when the semaphore has waiters.
It allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>You can write this pattern:</p>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a>`
semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def limited():</dt><dd><dl class="simple">
<dt>async with semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id23"><span class="problematic" id="id24">``</span></a><a href="#id25"><span class="problematic" id="id26">`</span></a></p>
<p>like this:</p>
<p><a href="#id27"><span class="problematic" id="id28">``</span></a>`
semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> for more details on debugging capabilities.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the semaphore with a given value and optional name for debugging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The initial value for the semaphore.</p></li>
<li><p><strong>name</strong> (<em>optional</em>) – An optional name used only to provide useful context in debug logs.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.Semaphore._start_debug_daemon" title="a_sync.primitives.locks.Semaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.Semaphore._ensure_debug_daemon" title="a_sync.primitives.locks.Semaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.Semaphore._ensure_debug_daemon" title="a_sync.primitives.locks.Semaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquire the semaphore, ensuring that debug logging is enabled if there are waiters.</p>
<p>If the internal counter is larger than zero on entry, decrement it by one and return
True immediately.  If it is zero on entry, block, waiting until some other coroutine
has called release() to make it larger than 0, and then return True.</p>
<p>If the semaphore value is zero or less, the debug daemon is started to log the state of the semaphore.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True when the semaphore is successfully acquired.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.release" title="Link to this definition"></a></dt>
<dd><p>Release a semaphore, incrementing the internal counter by one.</p>
<p>When it was zero on entry and another coroutine is waiting for it to
become larger than zero again, wake up that coroutine.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.Semaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.Semaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">a_sync.primitives.locks.</span></span><span class="sig-name descname"><span class="pre">ThreadsafeSemaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore" title="Link to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#a_sync.primitives.locks.semaphore.Semaphore" title="a_sync.primitives.locks.semaphore.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a></p>
<p>ThreadsafeSemaphore(int value: Optional[int], str name: Optional[str] = None) -&gt; None</p>
<p>A semaphore that works in a multi-threaded environment.</p>
<p>This semaphore ensures that the program functions correctly even when used with multiple event loops.
It provides a workaround for edge cases involving multiple threads and event loops by using a separate semaphore
for each thread.</p>
<p class="rubric">Example</p>
<p>semaphore = ThreadsafeSemaphore(5)</p>
<dl class="simple">
<dt>async def limited():</dt><dd><dl class="simple">
<dt>async with semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.Semaphore" title="a_sync.primitives.locks.Semaphore"><code class="xref py py-class docutils literal notranslate"><span class="pre">Semaphore</span></code></a> for the base class implementation.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.__call__">
<span class="sig-name descname"><span class="pre">__call__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.__call__" title="Link to this definition"></a></dt>
<dd><p>Decorator method to wrap coroutine functions with the semaphore.</p>
<p>This allows rewriting the pattern of acquiring a semaphore within a coroutine using a decorator.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.__init__" title="Link to this definition"></a></dt>
<dd><p>Initialize the threadsafe semaphore with a given value and optional name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> – The initial value for the semaphore, should be an integer.</p></li>
<li><p><strong>name</strong> (<em>optional</em>) – An optional name for the semaphore.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._debug_daemon">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Daemon coroutine (runs in a background task) which will emit a debug log every minute while the semaphore has waiters.</p>
<p>This method is part of the <code class="xref py py-class docutils literal notranslate"><span class="pre">_DebugDaemonMixin</span></code> and is used to provide detailed logging information
about the semaphore’s state when it is being waited on.</p>
<p>This code will only run if <cite>self.logger.isEnabledFor(logging.DEBUG)</cite> is True. You do not need to include any level checks in your custom implementations.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<dl class="simple">
<dt>async def monitor():</dt><dd><p>await semaphore._debug_daemon()</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._ensure_debug_daemon">
<span class="sig-name descname"><span class="pre">_ensure_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._ensure_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Ensures that the debug daemon task is running.</p>
<p>This method checks if the debug daemon is already running and starts it if necessary. If debug logging is not enabled, it sets the daemon to a dummy future.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either the debug daemon task or a dummy future if debug logging is not enabled.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Ensuring the debug daemon is running:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_ensure_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.ThreadsafeSemaphore._start_debug_daemon" title="a_sync.primitives.locks.ThreadsafeSemaphore._start_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_start_debug_daemon()</span></code></a> for starting the daemon.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._get_loop">
<span class="sig-name descname"><span class="pre">_get_loop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._get_loop" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._start_debug_daemon">
<span class="sig-name descname"><span class="pre">_start_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="s"><span class="pre">'Future[None]'</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._start_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Starts the debug daemon task if debug logging is enabled and the event loop is running.</p>
<p>This method checks if debug logging is enabled and if the event loop is running. If both conditions are met, it starts the debug daemon task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*args</strong> – Positional arguments for the debug daemon.</p></li>
<li><p><strong>**kwargs</strong> – Keyword arguments for the debug daemon.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The debug daemon task as an asyncio.Task, or a dummy future if debug logs are not enabled or if the daemon cannot be created.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Future[None]</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Starting the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_start_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.ThreadsafeSemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.ThreadsafeSemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._stop_debug_daemon">
<span class="sig-name descname"><span class="pre">_stop_debug_daemon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Task</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._stop_debug_daemon" title="Link to this definition"></a></dt>
<dd><p>Stops the debug daemon task.</p>
<p>This method cancels the debug daemon task if it is running. Raises a ValueError if the task to be stopped is not the current daemon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>t</strong> (<em>optional</em>) – The task to be stopped, if any.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.14)"><strong>ValueError</strong></a> – If <cite>t</cite> is not the current daemon.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Stopping the debug daemon:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_instance</span> <span class="o">=</span> <span class="n">MyDebugClass</span><span class="p">()</span>
<span class="n">my_instance</span><span class="o">.</span><span class="n">_stop_debug_daemon</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#a_sync.primitives.locks.ThreadsafeSemaphore._ensure_debug_daemon" title="a_sync.primitives.locks.ThreadsafeSemaphore._ensure_debug_daemon"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_ensure_debug_daemon()</span></code></a> for ensuring the daemon is running.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._wake_up_next">
<span class="sig-name descname"><span class="pre">_wake_up_next</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._wake_up_next" title="Link to this definition"></a></dt>
<dd><p>Wake up the first waiter that isn’t done.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.acquire">
<span class="sig-name descname"><span class="pre">acquire</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.acquire" title="Link to this definition"></a></dt>
<dd><p>Acquire the semaphore, ensuring that debug logging is enabled if there are waiters.</p>
<p>If the internal counter is larger than zero on entry, decrement it by one and return
True immediately.  If it is zero on entry, block, waiting until some other coroutine
has called release() to make it larger than 0, and then return True.</p>
<p>If the semaphore value is zero or less, the debug daemon is started to log the state of the semaphore.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True when the semaphore is successfully acquired.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.decorate">
<span class="sig-name descname"><span class="pre">decorate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">CoroFn</span><span class="p"><span class="pre">[</span></span><span class="pre">P</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">T</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.decorate" title="Link to this definition"></a></dt>
<dd><p>Wrap a coroutine function to ensure it runs with the semaphore.</p>
<p class="rubric">Example</p>
<p>semaphore = Semaphore(5)</p>
<p>&#64;semaphore
async def limited():</p>
<blockquote>
<div><p>return 1</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>fn</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a><em>[</em><em>[</em><em>~P</em><em>]</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a><em>[</em><em>T</em><em>]</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Callable" title="(in Python v3.14)"><em>Callable</em></a>[[~P], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Awaitable" title="(in Python v3.14)"><em>Awaitable</em></a>[<em>T</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.locked">
<span class="sig-name descname"><span class="pre">locked</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.locked" title="Link to this definition"></a></dt>
<dd><p>Returns True if semaphore cannot be acquired immediately.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">void</span></span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.release" title="Link to this definition"></a></dt>
<dd><p>Release a semaphore, incrementing the internal counter by one.</p>
<p>When it was zero on entry and another coroutine is waiting for it to
become larger than zero again, wake up that coroutine.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._loop">
<span class="sig-name descname"><span class="pre">_loop</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._loop" title="Link to this definition"></a></dt>
<dd><p>AbstractEventLoop</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoopBoundMixin._loop</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._value">
<span class="sig-name descname"><span class="pre">_value</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._value" title="Link to this definition"></a></dt>
<dd><p>int</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._value</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore._waiters">
<span class="sig-name descname"><span class="pre">_waiters</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore._waiters" title="Link to this definition"></a></dt>
<dd><p>List[Future]</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore._waiters</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.debug_logs_enabled">
<span class="sig-name descname"><span class="pre">debug_logs_enabled</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.debug_logs_enabled" title="Link to this definition"></a></dt>
<dd><p>bool</p>
<p>Checks if debug logging is enabled for the logger.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span><span class="o">.</span><span class="n">debug_logs_enabled</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger.isEnabledFor" title="(in Python v3.14)"><code class="xref py py-attr docutils literal notranslate"><span class="pre">logging.Logger.isEnabledFor</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.debug_logs_enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.logger">
<span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.logger" title="Link to this definition"></a></dt>
<dd><p>Logger</p>
<p>Provides a logger instance specific to the class using this mixin.</p>
<p>The logger ID is constructed from the module and class name, and optionally includes an instance name if available.</p>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">_name</span> <span class="o">=</span> <span class="s2">&quot;example&quot;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">instance</span> <span class="o">=</span> <span class="n">MyClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.MyClass.example&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span><span class="w"> </span><span class="nc">AnotherClass</span><span class="p">(</span><span class="n">_LoggerMixin</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">pass</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_instance</span> <span class="o">=</span> <span class="n">AnotherClass</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span> <span class="o">=</span> <span class="n">another_instance</span><span class="o">.</span><span class="n">logger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">another_logger</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;module_name.AnotherClass&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Replace <cite>module_name</cite> with the actual module name where the class is defined.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.getLogger" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.getLogger()</span></code></a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.14)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a></p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>_LoggerMixin.logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.name" title="Link to this definition"></a></dt>
<dd><p>str</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Semaphore.name</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="a_sync.primitives.locks.ThreadsafeSemaphore.semaphore">
<span class="sig-name descname"><span class="pre">semaphore</span></span><a class="headerlink" href="#a_sync.primitives.locks.ThreadsafeSemaphore.semaphore" title="Link to this definition"></a></dt>
<dd><p>Semaphore</p>
<p>Returns the appropriate semaphore for the current thread.</p>
<p>NOTE: We can’t cache this property because we need to check the current thread every time we access it.</p>
<p class="rubric">Example</p>
<p>semaphore = ThreadsafeSemaphore(5)</p>
<dl class="simple">
<dt>async def limited():</dt><dd><dl class="simple">
<dt>async with semaphore.semaphore:</dt><dd><p>return 1</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ThreadsafeSemaphore.semaphore</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="a_sync.primitives.html" class="btn btn-neutral float-left" title="a_sync.primitives package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="a_sync.sphinx.html" class="btn btn-neutral float-right" title="a_sync.sphinx package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, BobTheBuidler.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>